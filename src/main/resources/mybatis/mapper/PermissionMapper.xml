<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.braisedpanda.shirotest.mapper.PermissionMapper">


    <!--添加角色-->
    <insert id="insertRole" parameterType="com.braisedpanda.shirotest.bean.Role"

    >
        insert into role
        (roleId,
        role,
        roleDescribe

        )
        values (
        #{roleId},
        #{role},
        #{roleDescribe}
   )

    </insert>


    <!--查询所有的权限信息-->
    <select id="getAllPermission" resultType="com.braisedpanda.shirotest.bean.Permission">
        select * from permission
    </select>

    <!--根据权限id查出对应的权限-->
    <select id="getPermissionById" resultType="com.braisedpanda.shirotest.bean.Permission">
        select * from permission where permissionId = #{permissionId}
    </select>

    <insert id="insertRolePermission" parameterType="com.braisedpanda.shirotest.bean.RolePermission">
      insert into rolePermission
      (
      rPId,
      permissionId,
      permission,
      permissionDescribe,
      roleId,
      role,
      roleDescribe
      )
      values
      (
      #{rPId},
      #{permissionId},
      #{permission},
      #{permissionDescribe},
      #{roleId},
      #{role},
      #{roleDescribe}

      )



    </insert>


    <!--查找所有的角色-->
    <select id="getAllRole" resultType="com.braisedpanda.shirotest.bean.Role">
        select * from role
    </select>

    <!--根据uid查找所有的角色-->
    <select id="getRoleById" resultType="com.braisedpanda.shirotest.bean.UserRole">
        select * from userRole where uid=#{uid}
    </select>

    <!--根据roleId在表role中查询相应的role-->
    <select id="getRoleByroleId" resultType="com.braisedpanda.shirotest.bean.Role">
        select * from role where roleId = #{roleId}
    </select>

    <!--新增userRole信息-->
    <insert id="insertUserRole" parameterType="com.braisedpanda.shirotest.bean.UserRole">
        insert into userRole
        (
        uRId,
        roleId,
        role,
        uid,
        username,
        roleDescribe
        )
        values
        (
        #{uRId},
        #{roleId},
        #{role},
        #{uid},
        #{username},
        #{roleDescribe}

        )



    </insert>

    <!--在表userRole中删除所有uid的角色-->
    <delete id="deleteRoleByUid">
        delete  from userRole where uid=#{uid}
    </delete>

    <!--查找所有的rolePermission表中内容-->
    <select id="listRolePermission" resultType="com.braisedpanda.shirotest.bean.RolePermission"
            >
        select * from rolePermission
    </select>

    <!--根据rPId删除角色所拥有的权限-->
    <delete id="deleteRolePermissionById">
        delete from rolePermission where rPId = #{rPId}
    </delete>


    <!-- 根据rPId查找rolePermission对象-->
    <select id="getRolePermissionById" resultType="com.braisedpanda.shirotest.bean.RolePermission">
        select * from rolePermission where roleId = #{roleId}

    </select>

    <!--根据roleId删除rolePermission表中所有的权限-->
    <delete id="deleteRolePermissionByroleId">
        delete from rolePermission where roleId=#{roleId}
    </delete>

    <!-- 在role表中更新role的相关权限、名称等信息-->
    <update id="updateRole" parameterType="com.braisedpanda.shirotest.bean.Role">
        update role set role=#{role},roleDescribe=#{roleDescribe} where roleId=#{roleId}
    </update>

    <!--根据roleId删除表role中的role-->
    <delete id="deleteRoleByroleId">
        delete from role where roleId=#{roleId}
    </delete>




</mapper>